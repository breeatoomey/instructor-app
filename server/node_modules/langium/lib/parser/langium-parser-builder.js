"use strict";
/******************************************************************************
 * Copyright 2021 TypeFox GmbH
 * This program and the accompanying materials are made available under the
 * terms of the MIT License, which is available in the project root.
 ******************************************************************************/
Object.defineProperty(exports, "__esModule", { value: true });
exports.prepareLangiumParser = exports.createLangiumParser = void 0;
const langium_parser_1 = require("./langium-parser");
const parser_builder_base_1 = require("./parser-builder-base");
/**
 * Create and finalize a Langium parser. The parser rules are derived from the grammar, which is
 * available at `services.Grammar`.
 */
function createLangiumParser(services) {
    const parser = prepareLangiumParser(services);
    parser.finalize();
    return parser;
}
exports.createLangiumParser = createLangiumParser;
/**
 * Create a Langium parser without finalizing it. This is used to extract more detailed error
 * information when the parser is initially validated.
 */
function prepareLangiumParser(services) {
    const grammar = services.Grammar;
    const lexer = services.parser.Lexer;
    const parser = new langium_parser_1.LangiumParser(services);
    return (0, parser_builder_base_1.createParser)(grammar, parser, lexer.definition);
}
exports.prepareLangiumParser = prepareLangiumParser;
//# sourceMappingURL=langium-parser-builder.js.map