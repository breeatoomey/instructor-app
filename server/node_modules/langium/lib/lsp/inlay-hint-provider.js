"use strict";
/******************************************************************************
 * Copyright 2023 TypeFox GmbH
 * This program and the accompanying materials are made available under the
 * terms of the MIT License, which is available in the project root.
 ******************************************************************************/
Object.defineProperty(exports, "__esModule", { value: true });
exports.AbstractInlayHintProvider = void 0;
const vscode_languageserver_1 = require("vscode-languageserver");
const ast_util_1 = require("../utils/ast-util");
const promise_util_1 = require("../utils/promise-util");
class AbstractInlayHintProvider {
    async getInlayHints(document, params, cancelToken = vscode_languageserver_1.CancellationToken.None) {
        const root = document.parseResult.value;
        const inlayHints = [];
        const acceptor = hint => inlayHints.push(hint);
        for (const node of (0, ast_util_1.streamAst)(root, { range: params.range })) {
            await (0, promise_util_1.interruptAndCheck)(cancelToken);
            this.computeInlayHint(node, acceptor);
        }
        return inlayHints;
    }
}
exports.AbstractInlayHintProvider = AbstractInlayHintProvider;
//# sourceMappingURL=inlay-hint-provider.js.map