/******************************************************************************
 * Copyright 2021 TypeFox GmbH
 * This program and the accompanying materials are made available under the
 * terms of the MIT License, which is available in the project root.
 ******************************************************************************/
import type { CompletionItem, CompletionList, Diagnostic, DocumentSymbol, FoldingRange, FormattingOptions, Range, ReferenceParams, SemanticTokenTypes, TextDocumentIdentifier, TextDocumentPositionParams, WorkspaceSymbol } from 'vscode-languageserver';
import type { LangiumServices, LangiumSharedServices } from '../services';
import type { AstNode, Properties } from '../syntax-tree';
import type { LangiumDocument } from '../workspace/documents';
import type { BuildOptions } from '../workspace/document-builder';
import { DiagnosticSeverity } from 'vscode-languageserver';
import { SemanticTokensDecoder } from '../lsp/semantic-token-provider';
export interface ParseHelperOptions extends BuildOptions {
    documentUri?: string;
}
export declare function parseHelper<T extends AstNode = AstNode>(services: LangiumServices): (input: string, options?: ParseHelperOptions) => Promise<LangiumDocument<T>>;
export type ExpectFunction = (actual: unknown, expected: unknown, message?: string) => void;
/**
 * Overrides the assertion function used by tests. Uses `assert.deepStrictEqual` by default
 *
 * @deprecated Since 1.2.0. Do not override the assertion functionality.
 */
export declare function expectFunction(functions: ExpectFunction): void;
export interface ExpectedBase {
    text: string;
    indexMarker?: string;
    rangeStartMarker?: string;
    rangeEndMarker?: string;
}
export interface ExpectedHighlight extends ExpectedBase {
    index?: number;
    rangeIndex?: number | number[];
}
/**
 * Testing utility function for the `textDocument/documentHighlight` LSP request
 *
 * @returns A function that performs the assertion
 */
export declare function expectHighlight(services: LangiumServices): (input: ExpectedHighlight) => Promise<void>;
export interface ExpectedSymbolsList extends ExpectedBase {
    expectedSymbols: Array<string | DocumentSymbol>;
    symbolToString?: (item: DocumentSymbol) => string;
}
export interface ExpectedSymbolsCallback extends ExpectedBase {
    assert: (symbols: DocumentSymbol[]) => void;
}
export type ExpectedSymbols = ExpectedSymbolsList | ExpectedSymbolsCallback;
export declare function expectSymbols(services: LangiumServices): (input: ExpectedSymbols) => Promise<void>;
export interface ExpectedWorkspaceSymbolsBase {
    query?: string;
}
export interface ExpectedWorkspaceSymbolsList extends ExpectedWorkspaceSymbolsBase {
    expectedSymbols: Array<string | WorkspaceSymbol>;
    symbolToString?: (item: WorkspaceSymbol) => string;
}
export interface ExpectedWorkspaceSymbolsCallback extends ExpectedWorkspaceSymbolsBase {
    assert: (symbols: WorkspaceSymbol[]) => void;
}
export type ExpectedWorkspaceSymbols = ExpectedWorkspaceSymbolsList | ExpectedWorkspaceSymbolsCallback;
export declare function expectWorkspaceSymbols(services: LangiumSharedServices): (input: ExpectedWorkspaceSymbols) => Promise<void>;
export interface ExpectedFoldings extends ExpectedBase {
    assert?: (foldings: FoldingRange[], expected: Array<[number, number]>) => void;
}
export declare function expectFoldings(services: LangiumServices): (input: ExpectedFoldings) => Promise<void>;
export declare function textDocumentParams(document: LangiumDocument): {
    textDocument: TextDocumentIdentifier;
};
export interface ExpectedCompletionItems extends ExpectedBase {
    index: number;
    expectedItems: Array<string | CompletionItem>;
    itemToString?: (item: CompletionItem) => string;
}
export interface ExpectedCompletionCallback extends ExpectedBase {
    index: number;
    assert: (completions: CompletionList) => void;
}
export type ExpectedCompletion = ExpectedCompletionItems | ExpectedCompletionCallback;
export declare function expectCompletion(services: LangiumServices): (expectedCompletion: ExpectedCompletion) => Promise<void>;
export interface ExpectedGoToDefinition extends ExpectedBase {
    index: number;
    rangeIndex: number | number[];
}
export declare function expectGoToDefinition(services: LangiumServices): (expectedGoToDefinition: ExpectedGoToDefinition) => Promise<void>;
export interface ExpectedFindReferences extends ExpectedBase {
    includeDeclaration: boolean;
}
export declare function expectFindReferences(services: LangiumServices): (expectedFindReferences: ExpectedFindReferences) => Promise<void>;
export declare function referenceParams(document: LangiumDocument, offset: number, includeDeclaration: boolean): ReferenceParams;
export interface ExpectedHover extends ExpectedBase {
    index: number;
    hover?: string | RegExp;
}
export declare function expectHover(services: LangiumServices): (expectedHover: ExpectedHover) => Promise<void>;
export interface ExpectFormatting {
    before: string;
    after: string;
    range?: Range;
    options?: FormattingOptions;
}
export declare function expectFormatting(services: LangiumServices): (expectedFormatting: ExpectFormatting) => Promise<void>;
export declare function textDocumentPositionParams(document: LangiumDocument, offset: number): TextDocumentPositionParams;
export declare function parseDocument<T extends AstNode = AstNode>(services: LangiumServices, input: string): Promise<LangiumDocument<T>>;
export declare function replaceIndices(base: ExpectedBase): {
    output: string;
    indices: number[];
    ranges: Array<[number, number]>;
};
export interface ValidationResult<T extends AstNode = AstNode> {
    diagnostics: Diagnostic[];
    document: LangiumDocument<T>;
}
export declare function validationHelper<T extends AstNode = AstNode>(services: LangiumServices): (input: string) => Promise<ValidationResult<T>>;
export type ExpectDiagnosticOptionsWithoutContent<T extends AstNode = AstNode> = ExpectDiagnosticCode & (ExpectDiagnosticAstOptions<T> | ExpectDiagnosticRangeOptions | ExpectDiagnosticOffsetOptions);
export type ExpectDiagnosticOptions<T extends AstNode = AstNode> = ExpectDiagnosticContent & ExpectDiagnosticOptionsWithoutContent<T>;
export interface ExpectDiagnosticContent {
    message?: string | RegExp;
    severity?: DiagnosticSeverity;
}
export interface ExpectDiagnosticCode {
    code?: string;
}
export interface ExpectDiagnosticAstOptions<T extends AstNode> {
    node?: T;
    property?: Properties<T> | {
        name: Properties<T>;
        index?: number;
    };
}
export interface ExpectDiagnosticRangeOptions {
    range: Range;
}
export interface ExpectDiagnosticOffsetOptions {
    offset: number;
    length: number;
}
export type Predicate<T> = (arg: T) => boolean;
export declare function isRangeEqual(lhs: Range, rhs: Range): boolean;
export declare function rangeToString(range: Range): string;
export declare function filterByOptions<T extends AstNode = AstNode, N extends AstNode = AstNode>(validationResult: ValidationResult<T>, options: ExpectDiagnosticOptions<N>): Diagnostic[];
export declare function expectNoIssues<T extends AstNode = AstNode, N extends AstNode = AstNode>(validationResult: ValidationResult<T>, filterOptions?: ExpectDiagnosticOptions<N>): void;
export declare function expectIssue<T extends AstNode = AstNode, N extends AstNode = AstNode>(validationResult: ValidationResult<T>, filterOptions?: ExpectDiagnosticOptions<N>): void;
export declare function expectError<T extends AstNode = AstNode, N extends AstNode = AstNode>(validationResult: ValidationResult<T>, message: string | RegExp, filterOptions: ExpectDiagnosticOptionsWithoutContent<N>): void;
export declare function expectWarning<T extends AstNode = AstNode, N extends AstNode = AstNode>(validationResult: ValidationResult<T>, message: string | RegExp, filterOptions: ExpectDiagnosticOptionsWithoutContent<N>): void;
export declare function clearDocuments(services: LangiumServices): Promise<void>;
export interface DecodedSemanticTokensWithRanges {
    tokens: SemanticTokensDecoder.DecodedSemanticToken[];
    ranges: Array<[number, number]>;
}
export declare function highlightHelper<T extends AstNode = AstNode>(services: LangiumServices): (input: string) => Promise<DecodedSemanticTokensWithRanges>;
export interface DecodedTokenOptions {
    rangeIndex?: number;
    tokenType: SemanticTokenTypes;
}
export declare function expectSemanticToken(tokensWithRanges: DecodedSemanticTokensWithRanges, options: DecodedTokenOptions): void;
//# sourceMappingURL=langium-test.d.ts.map